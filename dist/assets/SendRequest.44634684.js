import{n,i as d}from"./index.33ed05e9.js";const l={props:{request:{require:!0},id:{require:!0}},data(){return{method:this.request.method,url:this.request.url.raw,headers:{},auths:{},params:{},body:{},isLoading:!1,isEmpty:d}},watch:{request:{handler(r){this.method=r.method,this.url=r.url.raw},immediate:!0}},methods:{async testRequest(){this.isLoading=!0;let r=new Headers;this.headers.forEach(s=>{r.append(s.key,s.value)});const e={method:this.method,headers:r,cache:"default"};if(this.method!="GET")if(this.body.body_type=="json")e.body=this.body;else{let s=new FormData;this.body.data.forEach(o=>{s.append(o.key,o.value)}),e.body=s}let t={},i=[];try{const s=new URL(this.url),o=new URLSearchParams(s.search);await fetch(s.href+"?"+o,e).then(async a=>{i.push(...a.headers),t.body=await a.text(),t.bodyUsed=a.bodyUsed,t.headers=a.headers,t.ok=a.ok,t.status=a.status,t.statusText=a.statusText,t.type=a.type,t.url=a.url,t.redirected=a.redirected,t.params=new URLSearchParams(new URL(a.url).search).entries()}).catch(()=>{this.$root.$emit("new_message",{responseType:"error",response:"Unable to fetch request",hasResponse:!0})}),t.headers=i,this.$root.$emit("responses",{tab:"response-content-tab",contents:t})}catch(s){this.$root.$emit("new_message",{responseType:"error",response:s.message,hasResponse:!0})}this.isLoading=!1},async saveRequest(){let r={type:"bearer",bearer:[{key:"token",value:this.auths.value,type:"string"}]},e={mode:this.body.body_type,formdata:this.body.data},t={mode:this.body.body_type,raw:JSON.stringify(this.body.data),options:{raw:{language:"json"}}};this.$root.$emit("save_collection_changes",{data:{id:this.id,request:{auth:r,method:this.method,header:this.headers,url:{raw:this.url},body:this.body.body_type=="json"?t:e},section:"item"}})}},mounted(){this.$root.$on("new_auth",r=>{this.auths=r}),this.$root.$on("new_headers",r=>{this.headers=r}),this.$root.$on("new_body",r=>{this.body=r}),this.$root.$on("new_params",r=>{this.isEmpty(r)||r.forEach(e=>{this.url.includes("?")?this.url=`${this.url}&${e.key}=${e.value}`:this.url=`${this.url}?${e.key}=${e.value}`})})}};var u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"request-input flex items-center justify-between pt-4 px-2 pb-0 mb-5"},[t("div",{},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.method,expression:"method"}],staticClass:"bg-gray-50 font-bold border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-auto p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",attrs:{id:"countries"},on:{change:function(i){var s=Array.prototype.filter.call(i.target.options,function(o){return o.selected}).map(function(o){var a="_value"in o?o._value:o.value;return a});e.method=i.target.multiple?s:s[0]}}},[t("option",{staticClass:"text-green-800",attrs:{value:"GET"}},[e._v("GET")]),t("option",{staticClass:"text-indigo-800",attrs:{value:"POST"}},[e._v("POST")]),t("option",{staticClass:"text-red-800",attrs:{value:"DELETE"}},[e._v("DELETE")]),t("option",{staticClass:"text-gray-800",attrs:{value:"PUT"}},[e._v("PUT")])])]),t("div",{staticClass:"ml-3 xl:w-80"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"w-full bg-gray-50 border border-gray-300 text-gray-600 font-bold dark:text-green-400 placeholder-gray-400 dark:placeholder-green-500 text-md leading-3 rounded-lg focus:ring-gray-500 focus:border-gray-500 block p-2.5 dark:bg-gray-700 dark:border-green-500",attrs:{type:"text",id:"success",autocomplete:"false",placeholder:"https://api.example.com/api"},domProps:{value:e.url},on:{input:function(i){i.target.composing||(e.url=i.target.value)}}})]),t("div",{staticClass:"ml-3 flex"},[t("button",{staticClass:"relative cursor-pointer inline-flex h-10 w-12 items-center justify-center rounded-lg border border-transparent text-white bg-[#334155] hover:bg-gray-900 px-2 py-1 text-sm font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-75",on:{click:e.testRequest}},[t("svg",{staticClass:"w-4 h-4",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}})]),t("div",{class:e.isLoading?"":"hidden"},[e._m(0)])]),t("button",{staticClass:"ml-2 relative cursor-pointer inline-flex h-10 w-12 items-center justify-center rounded-lg border border-transparent text-white bg-[#0369A1] hover:bg-[#475569] px-2 py-1 text-sm font-medium shadow-sm disabled:opacity-75",on:{click:e.saveRequest}},[t("svg",{staticClass:"w-4 h-4",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"}},[t("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m-.119-8.54a6 6 0 00-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 00-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 01-2.448-2.448 14.9 14.9 0 01.06-.312m-2.24 2.39a4.493 4.493 0 00-1.757 4.306 4.493 4.493 0 004.306-1.758M16.5 9a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}})]),t("div",{class:e.isLoading?"":"hidden"},[e._m(1)])])])])},h=[function(){var r=this,e=r._self._c;return e("div",{staticClass:"absolute top-0 right-0 bottom-0 left-0 w-full h-full backdrop-blur-sm z-10 rounded-[10px] flex items-center justify-center"},[e("span",{staticClass:"relative inset-0 inline-flex h-6 w-6 animate-spin items-center justify-center rounded-full border-2 border-gray-300 after:absolute after:h-8 after:w-8 after:rounded-full after:border-2 after:border-y-indigo-500 after:border-x-transparent"})])},function(){var r=this,e=r._self._c;return e("div",{staticClass:"absolute top-0 right-0 bottom-0 left-0 w-full h-full backdrop-blur-sm z-10 rounded-[10px] flex items-center justify-center"},[e("span",{staticClass:"relative inset-0 inline-flex h-6 w-6 animate-spin items-center justify-center rounded-full border-2 border-gray-300 after:absolute after:h-8 after:w-8 after:rounded-full after:border-2 after:border-y-indigo-500 after:border-x-transparent"})])}],c=n(l,u,h,!1,null,null,null,null);const f=c.exports;export{f as default};
