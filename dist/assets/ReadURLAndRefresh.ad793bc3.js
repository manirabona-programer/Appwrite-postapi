import{a as s}from"./services.3795b00f.js";import{n as l,u as n,A as i,t as r}from"./index.33ed05e9.js";const d={data(){return{urlParams:new URLSearchParams(window.location.search),user:n(),storage:i().storage(),database:i().database()}},methods:{async reloadUrlCurrentState(){this.urlParams.has("org")&&await this.loadOrganization(this.urlParams.get("org")),this.urlParams.has("project")&&await this.loadProject(this.urlParams.get("project")),this.urlParams.has("collection")&&await this.loadCollection(this.urlParams.get("collection"))},async loadOrganization(e){r(()=>{this.database.collection(s.organization_table),this.database.show(e).then(async a=>{this.$root.$emit("set_active_organization",{organization:a,shouldReload:!1})})})},async loadProject(e){r(()=>{this.database.collection(s.projects_table),this.database.show(e).then(async a=>{this.$root.$emit("set_active_project",{project:a,shouldReload:!1})})})},async loadCollection(e){r(()=>{this.database.collection(s.collection_table),this.database.show(e).then(async a=>{const t=this.storage.view(a.storage_file_id);fetch(t.href,{method:"GET",headers:{"X-Appwrite-Project":"64762d3a9c27d51cb3b9","Content-Type":"application/json","X-Appwrite-Key":"27ffa0ee64d40883866462d167aa076e9a7352cd324c6441d24ed3624f0d031230d9ab7c03d0c6780c6cca2036245873203524e099c560f9c81d42412082bc51dc20954b80ade15d1f232194636fba50b37360121bddb9ee36d2fc47686c14d8fb98cd21925cdb0a752d09a8fc3e50531758ee3d53a73a86955dee556c14065e"}}).then(o=>o.json()).then(o=>{let c={...a,file:o,file_id:a.storage_file_id};this.$root.$emit("autoload_collection",{before:()=>this.$root.$emit("set_loader_on"),collection:c,after:()=>this.$root.$emit("set_loader_off")})})})})}},async mounted(){await this.reloadUrlCurrentState()}};var h=function(){var a=this,t=a._self._c;return t("div")},f=[],_=l(d,h,f,!1,null,null,null,null);const b=_.exports;export{b as default};
